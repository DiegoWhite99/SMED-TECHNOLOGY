<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smed Support</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="icon" href="/icons/icono-principal.svg" type="image/png" />
  <link rel="stylesheet" href="../Css/nav.css" />
  <link rel="stylesheet" href="../Css/support.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .hidden {
      display: none;
    }
    .form-section {
      background-color: #f9f9f9;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1rem;
    }
    .form-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .form-row > div {
      flex: 1;
    }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="nav-logo">
      <p>Smed Technology</p>
    </div>
    <div class="nav-menu" id="navMenu">
      <ul>
        <li><a href="blog.html" class="link">¿Quiénes somos?</a></li>
        <li><a href="servicios.html" class="link">Servicios</a></li>
        <li><a href="tienda.html" class="link">Tienda</a></li>
        <li><a href="experiencias.html" class="link">Experiencias</a></li>
      </ul>
    </div>
    <div class="nav-button">
      <button class="btn white-btn" id="loginbtn" onclick="location.href='login.html';">Inicio</button>
    </div>
  </nav>

  <main>
    <section class="smed-support-hero">
      <div class="hero-content">
        <h1 class="hero-title">Bienvenido a <span>SMED SUPPORT</span></h1>
        <p class="hero-subtitle">Aquí tus dispositivos tienen <strong>una segunda oportunidad</strong> ✨</p>

        <input type="text" id="cliente-nombre" placeholder="Ingresa tu nombre" class="nombre-input" />
        <button id="ingresar-btn" class="ingresar-btn">Ingresar</button>

        <div id="timeline-container" class="timeline-container hidden">
          <h2 class="timeline-title" id="mensaje-cliente">Bienvenido a tu servicio de mantenimiento</h2>

          <div class="timeline">
            <div class="timeline-step active" id="step1">
              <div class="step-icon"><i class="fas fa-clipboard-list"></i></div>
              <p>Recepción</p>
            </div>
            <div class="timeline-step" id="step2">
              <div class="step-icon"><i class="fas fa-tools"></i></div>
              <p>Reparación</p>
            </div>
            <div class="timeline-step" id="step3">
              <div class="step-icon"><i class="fas fa-box-open"></i></div>
              <p>Entrega</p>
            </div>
          </div>

          <div id="form-etapa1" class="form-section hidden">
            <p><strong>Rellena la hoja de vida del dispositivo</strong></p>
            <form id="formulario-equipo">
              <h3>Ingreso del Dispositivo</h3>
          
              <div class="form-row">
                <div>
                  <label for="nombre-persona">Nombre del cliente</label>
                  <input type="text" id="nombre-persona" name="nombre-persona" required />
                </div>
                <div>
                  <label for="documento">Documento de identidad</label>
                  <input type="text" id="documento" name="documento" required />
                </div>
              </div>
          
              <div class="form-row">
                <div>
                  <label for="tipo-dispositivo">Tipo de dispositivo</label>
                  <select id="tipo-dispositivo" name="tipo-dispositivo" required>
                    <option value="">Selecciona una opción</option>
                    <option value="laptop">Laptop</option>
                    <option value="pc">PC</option>
                    <option value="impresora">Impresora</option>
                    <option value="router">Router</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
                <div>
                  <label for="nombre-equipo">Nombre del equipo</label>
                  <input type="text" id="nombre-equipo" name="nombre-equipo" required />
                </div>
              </div>
          
              <div class="form-row">
                <div>
                  <label for="marca">Marca</label>
                  <input type="text" id="marca" name="marca" required />
                </div>
                <div>
                  <label for="serial">Serial</label>
                  <input type="text" id="serial" name="serial" required />
                </div>
              </div>
          
              <div class="form-row">
                <div>
                  <label for="estado">Estado del equipo</label>
                  <select id="estado" name="estado" required>
                    <option value="">Selecciona una opción</option>
                    <option value="bueno">Bueno</option>
                    <option value="regular">Regular</option>
                    <option value="critico">Crítico</option>
                  </select>
                </div>
                <div>
                  <label for="foto">Registro fotográfico</label>
                  <input type="file" id="foto" name="foto" accept="image/*" required />
                </div>
              </div>
          
              <div style="margin-bottom: 1rem;">
                <label for="diagnostico">Primer diagnóstico</label>
                <textarea id="diagnostico" name="diagnostico" rows="3" style="width: 100%;" required></textarea>
              </div>
          
              <div style="margin-bottom: 0.5rem;">
                <input type="checkbox" id="autorizo-datos" name="autorizo-datos" required />
                <label for="autorizo-datos">Autorizo el tratamiento de mis datos personales.</label>
              </div>
          
              <div style="margin-bottom: 1rem;">
                <input type="checkbox" id="acepto-procedimiento" name="acepto-procedimiento" required />
                <label for="acepto-procedimiento">Estoy de acuerdo con el procedimiento técnico.</label>
              </div>
          
              <button type="button" id="descargar-pdf" class="ingresar-btn" style="margin-top: 1rem;">Descargar PDF</button>
            </form>
          </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    document.getElementById('ingresar-btn').addEventListener('click', () => {
      const nombre = document.getElementById('cliente-nombre').value.trim();
      const mensaje = document.getElementById('mensaje-cliente');
      const contenedor = document.getElementById('timeline-container');

      if (nombre !== "") {
        mensaje.textContent = `Bienvenido a tu servicio de mantenimiento, ${nombre}`;
        contenedor.classList.remove('hidden');
        document.getElementById('form-etapa1').classList.remove('hidden');
      } else {
        alert('Por favor ingresa tu nombre.');
      }
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    document.getElementById('descargar-pdf').addEventListener('click', () => {
      const element = document.getElementById('formulario-equipo');

      const opt = {
        margin: 0.5,
        filename: 'hoja-de-vida-dispositivo.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save();
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <script>
    document.getElementById("descargar-pdf").addEventListener("click", async function () {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
  
      // Obtener los valores del formulario
      const nombrePersona = document.getElementById("nombre-persona").value;
      const documento = document.getElementById("documento").value;
      const tipoDispositivo = document.getElementById("tipo-dispositivo").value;
      const nombreEquipo = document.getElementById("nombre-equipo").value;
      const marca = document.getElementById("marca").value;
      const serial = document.getElementById("serial").value;
      const estado = document.getElementById("estado").value;
      const diagnostico = document.getElementById("diagnostico").value;
      const autorizo = document.getElementById("autorizo-datos").checked ? "Sí" : "No";
      const procedimiento = document.getElementById("acepto-procedimiento").checked ? "Sí" : "No";
      const foto = document.getElementById("foto").files[0];
  
      // Encabezado
      doc.setFontSize(16);
      doc.text("Hoja de Vida del Dispositivo", 20, 20);
  
      // Tabla de datos
      doc.autoTable({
        startY: 30,
        head: [["Campo", "Valor"]],
        body: [
          ["Nombre del cliente", nombrePersona],
          ["Documento", documento],
          ["Tipo de dispositivo", tipoDispositivo],
          ["Nombre del equipo", nombreEquipo],
          ["Marca", marca],
          ["Serial", serial],
          ["Estado", estado],
          ["Primer diagnóstico", diagnostico],
          ["Autorización de datos", autorizo],
          ["Conformidad con procedimiento", procedimiento],
        ],
        styles: { fontSize: 10 }
      });
  
      // Si hay una imagen, la agregamos
      if (foto) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const imgData = e.target.result;
          doc.addPage();
          doc.setFontSize(14);
          doc.text("Registro Fotográfico", 20, 20);
          doc.addImage(imgData, "JPEG", 20, 30, 160, 120); // Ajusta tamaño si hace falta
          doc.save("hoja-de-vida.pdf");
        };
        reader.readAsDataURL(foto);
      } else {
        doc.save("hoja-de-vida.pdf");
      }
    });
  </script>
  
  
</body>
</html>
